[36m[2020-06-05 10:11:30 DEBUG] [cli:71][39m ###############################################################################
[36m[2020-06-05 10:11:30 DEBUG] [cli:72][39m Running command 'run'
[36m[2020-06-05 10:11:30 DEBUG] [cli:76][39m Using settings file '/Users/mdrahali/.chaostoolkit/settings.yaml'
[36m[2020-06-05 10:11:30 DEBUG] [settings:24][39m The Chaos Toolkit settings file could not be found at '/Users/mdrahali/.chaostoolkit/settings.yaml'.
[36m[2020-06-05 10:11:30 DEBUG] [__init__:355][39m No controls to apply on 'loader'
[36m[2020-06-05 10:11:30 DEBUG] [__init__:355][39m No controls to apply on 'loader'
[36m[2020-06-05 10:11:30 DEBUG] [caching:25][39m Building activity cache...
[36m[2020-06-05 10:11:30 DEBUG] [caching:35][39m Cached 4 activities
[32m[2020-06-05 10:11:30 INFO] [experiment:54][39m Validating the experiment's syntax
[36m[2020-06-05 10:11:30 DEBUG] [configuration:47][39m Loading configuration...
[36m[2020-06-05 10:11:30 DEBUG] [secret:74][39m Loading secrets...
[36m[2020-06-05 10:11:30 DEBUG] [secret:89][39m Secrets loaded
[32m[2020-06-05 10:11:31 INFO] [experiment:103][39m Experiment looks valid
[36m[2020-06-05 10:11:31 DEBUG] [caching:42][39m Clearing activities cache
[36m[2020-06-05 10:11:31 DEBUG] [caching:25][39m Building activity cache...
[36m[2020-06-05 10:11:31 DEBUG] [caching:35][39m Cached 4 activities
[36m[2020-06-05 10:11:31 DEBUG] [configuration:47][39m Loading configuration...
[36m[2020-06-05 10:11:31 DEBUG] [secret:74][39m Loading secrets...
[36m[2020-06-05 10:11:31 DEBUG] [secret:89][39m Secrets loaded
[36m[2020-06-05 10:11:31 DEBUG] [__init__:39][39m Initializing controls
[32m[2020-06-05 10:11:31 INFO] [experiment:195][39m Running experiment: Terminating the greeting service should not impact users
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'experiment'
[32m[2020-06-05 10:11:31 INFO] [hypothesis:184][39m Steady state hypothesis: Services are all available and healthy
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'hypothesis'
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:11:31 INFO] [activity:161][39m Probe: application-should-be-alive-and-healthy
[36m[2020-06-05 10:11:31 DEBUG] [python:36][39m Activity 'application-should-be-alive-and-healthy' loaded from '/usr/local/lib/python3.7/site-packages/chaosk8s/pod/probes.py'
[36m[2020-06-05 10:11:31 DEBUG] [__init__:69][39m Using Kubernetes context: default
[36m[2020-06-05 10:11:31 DEBUG] [probes:97][39m Found 2 pods matching label 'run=frontend' in ns 'default'
[36m[2020-06-05 10:11:31 DEBUG] [activity:179][39m   => succeeded with 'True'
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[36m[2020-06-05 10:11:31 DEBUG] [hypothesis:212][39m allowed tolerance is True
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:11:31 INFO] [activity:161][39m Probe: application-must-respond-normally
[36m[2020-06-05 10:11:31 DEBUG] [activity:233][39m Activity failed
    Traceback (most recent call last):
      File "/usr/local/lib/python3.7/site-packages/chaoslib/activity.py", line 230, in run_activity
        result = run_http_activity(activity, configuration, secrets)
      File "/usr/local/lib/python3.7/site-packages/chaoslib/provider/http.py", line 53, in run_http_activity
        verify=verify_tls)
      File "/usr/local/lib/python3.7/site-packages/requests/sessions.py", line 543, in get
        return self.request('GET', url, **kwargs)
      File "/usr/local/lib/python3.7/site-packages/requests/sessions.py", line 516, in request
        prep = self.prepare_request(req)
      File "/usr/local/lib/python3.7/site-packages/requests/sessions.py", line 459, in prepare_request
        hooks=merge_hooks(request.hooks, self.hooks),
      File "/usr/local/lib/python3.7/site-packages/requests/models.py", line 314, in prepare
        self.prepare_url(url, params)
      File "/usr/local/lib/python3.7/site-packages/requests/models.py", line 391, in prepare_url
        raise InvalidURL("Invalid URL %r: No host supplied" % url)
    requests.exceptions.InvalidURL: Invalid URL 'http://:8080/api/': No host supplied
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[36m[2020-06-05 10:11:31 DEBUG] [__init__:355][39m No controls to apply on 'hypothesis'
[36m[2020-06-05 10:11:31 DEBUG] [__init__:72][39m Cleaning up controls
[36m[2020-06-05 10:11:31 DEBUG] [caching:42][39m Clearing activities cache
[36m[2020-06-05 10:13:56 DEBUG] [cli:71][39m ###############################################################################
[36m[2020-06-05 10:13:56 DEBUG] [cli:72][39m Running command 'run'
[36m[2020-06-05 10:13:56 DEBUG] [cli:76][39m Using settings file '/Users/mdrahali/.chaostoolkit/settings.yaml'
[36m[2020-06-05 10:13:57 DEBUG] [settings:24][39m The Chaos Toolkit settings file could not be found at '/Users/mdrahali/.chaostoolkit/settings.yaml'.
[36m[2020-06-05 10:13:57 DEBUG] [__init__:355][39m No controls to apply on 'loader'
[36m[2020-06-05 10:13:57 DEBUG] [__init__:355][39m No controls to apply on 'loader'
[36m[2020-06-05 10:13:57 DEBUG] [caching:25][39m Building activity cache...
[36m[2020-06-05 10:13:57 DEBUG] [caching:35][39m Cached 4 activities
[32m[2020-06-05 10:13:57 INFO] [experiment:54][39m Validating the experiment's syntax
[36m[2020-06-05 10:13:57 DEBUG] [configuration:47][39m Loading configuration...
[36m[2020-06-05 10:13:57 DEBUG] [secret:74][39m Loading secrets...
[36m[2020-06-05 10:13:57 DEBUG] [secret:89][39m Secrets loaded
[32m[2020-06-05 10:13:58 INFO] [experiment:103][39m Experiment looks valid
[36m[2020-06-05 10:13:58 DEBUG] [caching:42][39m Clearing activities cache
[36m[2020-06-05 10:13:58 DEBUG] [caching:25][39m Building activity cache...
[36m[2020-06-05 10:13:58 DEBUG] [caching:35][39m Cached 4 activities
[36m[2020-06-05 10:13:58 DEBUG] [configuration:47][39m Loading configuration...
[36m[2020-06-05 10:13:58 DEBUG] [secret:74][39m Loading secrets...
[36m[2020-06-05 10:13:58 DEBUG] [secret:89][39m Secrets loaded
[36m[2020-06-05 10:13:58 DEBUG] [__init__:39][39m Initializing controls
[32m[2020-06-05 10:13:58 INFO] [experiment:195][39m Running experiment: Terminating the greeting service should not impact users
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'experiment'
[32m[2020-06-05 10:13:58 INFO] [hypothesis:184][39m Steady state hypothesis: Services are all available and healthy
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'hypothesis'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:13:58 INFO] [activity:161][39m Probe: application-should-be-alive-and-healthy
[36m[2020-06-05 10:13:58 DEBUG] [python:36][39m Activity 'application-should-be-alive-and-healthy' loaded from '/usr/local/lib/python3.7/site-packages/chaosk8s/pod/probes.py'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:69][39m Using Kubernetes context: default
[36m[2020-06-05 10:13:58 DEBUG] [probes:97][39m Found 2 pods matching label 'run=frontend' in ns 'default'
[36m[2020-06-05 10:13:58 DEBUG] [activity:179][39m   => succeeded with 'True'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[36m[2020-06-05 10:13:58 DEBUG] [hypothesis:212][39m allowed tolerance is True
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:13:58 INFO] [activity:161][39m Probe: application-must-respond-normally
[36m[2020-06-05 10:13:58 DEBUG] [activity:179][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.17.10', 'Date': 'Fri, 05 Jun 2020 09:13:53 GMT', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive'}, 'body': '[{"text":"this is journal #1"},{"text":"this is journal #2"}]'}'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[36m[2020-06-05 10:13:58 DEBUG] [hypothesis:212][39m allowed tolerance is 200
[32m[2020-06-05 10:13:58 INFO] [hypothesis:222][39m Steady state hypothesis is met!
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'hypothesis'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'method'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:13:58 INFO] [activity:161][39m Action: terminate-frontend-service
[36m[2020-06-05 10:13:58 DEBUG] [python:36][39m Activity 'terminate-frontend-service' loaded from '/usr/local/lib/python3.7/site-packages/chaosk8s/pod/actions.py'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:69][39m Using Kubernetes context: default
[36m[2020-06-05 10:13:58 DEBUG] [actions:194][39m Found 2 pods labelled 'run=frontend' in ns default
[36m[2020-06-05 10:13:58 DEBUG] [activity:181][39m   => succeeded without any result value
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:13:58 INFO] [activity:161][39m Probe: fetch-application-logs
[36m[2020-06-05 10:13:58 DEBUG] [python:36][39m Activity 'fetch-application-logs' loaded from '/usr/local/lib/python3.7/site-packages/chaosk8s/pod/probes.py'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:69][39m Using Kubernetes context: default
[36m[2020-06-05 10:13:58 DEBUG] [probes:54][39m Found 2 pods: [frontend-77c77f678f-sjpnv, frontend-77c77f678f-v5hvr] in ns 'default'
[36m[2020-06-05 10:13:58 DEBUG] [probes:76][39m Fetching logs for pod 'frontend-77c77f678f-sjpnv'
[36m[2020-06-05 10:13:58 DEBUG] [probes:76][39m Fetching logs for pod 'frontend-77c77f678f-v5hvr'
[36m[2020-06-05 10:13:58 DEBUG] [activity:179][39m   => succeeded with '{'frontend-77c77f678f-sjpnv': '2020-06-05T09:13:31.696713229Z /api/updates\n2020-06-05T09:13:50.112273588Z /api/updates\n', 'frontend-77c77f678f-v5hvr': '2020-06-05T09:13:40.238055907Z /api/updates\n2020-06-05T09:13:53.393637656Z /api\n'}'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'method'
[32m[2020-06-05 10:13:58 INFO] [hypothesis:184][39m Steady state hypothesis: Services are all available and healthy
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'hypothesis'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[32m[2020-06-05 10:13:58 INFO] [activity:161][39m Probe: application-should-be-alive-and-healthy
[36m[2020-06-05 10:13:58 DEBUG] [python:36][39m Activity 'application-should-be-alive-and-healthy' loaded from '/usr/local/lib/python3.7/site-packages/chaosk8s/pod/probes.py'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:69][39m Using Kubernetes context: default
[36m[2020-06-05 10:13:58 DEBUG] [probes:97][39m Found 3 pods matching label 'run=frontend' in ns 'default'
[36m[2020-06-05 10:13:58 DEBUG] [activity:233][39m Activity failed
    Traceback (most recent call last):
      File "/usr/local/lib/python3.7/site-packages/chaoslib/provider/python.py", line 55, in run_python_activity
        return func(**arguments)
      File "/usr/local/lib/python3.7/site-packages/chaosk8s/pod/probes.py", line 111, in pods_in_phase
        name=label_selector, s=d.status.phase, p=phase))
    chaoslib.exceptions.ActivityFailed: pod 'run=frontend' is in phase 'Pending' but should be 'Running'
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/usr/local/lib/python3.7/site-packages/chaoslib/activity.py", line 226, in run_activity
        result = run_python_activity(activity, configuration, secrets)
      File "/usr/local/lib/python3.7/site-packages/chaoslib/provider/python.py", line 60, in run_python_activity
        sys.exc_info()[2])
      File "/usr/local/lib/python3.7/site-packages/chaoslib/provider/python.py", line 55, in run_python_activity
        return func(**arguments)
      File "/usr/local/lib/python3.7/site-packages/chaosk8s/pod/probes.py", line 111, in pods_in_phase
        name=label_selector, s=d.status.phase, p=phase))
    chaoslib.exceptions.ActivityFailed: chaoslib.exceptions.ActivityFailed: pod 'run=frontend' is in phase 'Pending' but should be 'Running'
[31m[2020-06-05 10:13:58 ERROR] [activity:187][39m   => failed: chaoslib.exceptions.ActivityFailed: pod 'run=frontend' is in phase 'Pending' but should be 'Running'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'activity'
[33m[2020-06-05 10:13:58 WARNING] [hypothesis:201][39m Probe terminated unexpectedly, so its tolerance could not be validated
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'hypothesis'
[31m[2020-06-05 10:13:58 CRITICAL] [experiment:245][39m Steady state probe 'application-should-be-alive-and-healthy' is not in the given tolerance so failing this experiment
[32m[2020-06-05 10:13:58 INFO] [experiment:326][39m Let's rollback...
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'rollback'
[32m[2020-06-05 10:13:58 INFO] [rollback:25][39m No declared rollbacks, let's move on.
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'rollback'
[32m[2020-06-05 10:13:58 INFO] [experiment:276][39m Experiment ended with status: deviated
[32m[2020-06-05 10:13:58 INFO] [experiment:280][39m The steady-state has deviated, a weakness may have been discovered
[36m[2020-06-05 10:13:58 DEBUG] [__init__:355][39m No controls to apply on 'experiment'
[36m[2020-06-05 10:13:58 DEBUG] [__init__:72][39m Cleaning up controls
[36m[2020-06-05 10:13:58 DEBUG] [caching:42][39m Clearing activities cache
